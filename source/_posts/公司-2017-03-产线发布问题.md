---
title: 公司产线发布问题-2017-03
layout: fasle
date: 2017-03-18 10:44:22
updated:
comments:
tags:
  - 公司产线发布问题
categories:
  - 公司
---

## 一、0316版本

### 1. iframe 父子页面调用问题

{% asset_img bug-iframe.png "pic1: console报错" %}
**1.1 分析解决方案： **
通过top.location.reload()调用父页面的全局对象，会受iframe的JavaScript的权限的同源策略限制，所以该报错是跨域问题引起。
虽然浏览器中，` <script>、<img>、<iframe>、<link>` 等标签都可以加载跨域资源（X-Frame-Options 可防止iframe内框架调用）而不受同源限制，但浏览器限制了JavaScript的权限使其不能读、写加载的内容。
因此，只要修改父子页面为相同域名即可。

**1.2 后续 Actions **
1).收银台测试环境域名需要统一改造，且建构打包地址保持一致的
[点击查看PC收银台stg2地址](https://test2-m.stg.yqb.com/m/pc/cashier/index.html#/index?transId=576C7EE322172A29B2551DDAE176334FADD116C285ACF2B9EA49134594239642D0F254C616B372B7)
{% asset_img bug-cashier-host.png "pic1: 收银台测试环境域名问题" %}
目前产线已经完全切换成了 ` https://www.yqb.com/cashier/index.html#/index?transId=576C7EE322172A29B2551DDAE176334F3373437581D5EA39E01DCF7943EE063BD0F254C616B372B7` 

### 2. h5通用绑卡项目-卡号回显尾号问题
{% asset_img bug-card.png "pic2: 卡号回显尾号问题" %}
**1.1 分析解决方案： **
粗心问题，使用索引卡号来回显，开发缺少自测造成。





















